# AWS 고급 네트워킹 서비스 정리

## 1. DNS (Domain Name System)

### 1.1 DNS 서비스

- IP 주소를 사람이 이해하기 쉬운 문자 도메인으로 매핑
- UDP 53번 포트를 이용하여 도메인 주소 질의 및 응답

### 1.2 도메인 구조

- 루트 도메인: 최상위 도메인 (.)
- TLD (Top Level Domain): .com, .org, .co.kr 등
- SLD (Second Level Domain): google, naver 등
- 서브도메인: [www.google.com에서](http://www.google.com에서) www

### 1.3 DNS 서버 종류

- 루트 네임 서버: 전 세계에 13개, TLD 네임 서버 정보 제공
- TLD 네임 서버: .com 등 TLD 관리, SLD 네임 서버 정보 제공
- SLD 네임 서버: 실질적인 도메인(IP) 응답
- DNS 해석기(Resolver): 사용자 요청을 중계하고 최종 IP 응답 제공

### 1.4 DNS 통신 흐름

1. 사용자가 도메인 질의 → DNS 해석기로 전달
2. 해석기는 루트 → TLD → SLD 서버 순으로 질의
3. 최종 IP 주소를 사용자에게 전달

### 1.5 DNS 레코드 유형

- A: IPv4 주소 매핑
- AAAA: IPv6 주소 매핑
- NS: 네임서버 주소 지정
- CNAME: 도메인 별칭 지정

## 2. Amazon Route 53

### 2.1 주요 기능

- 도메인 이름 등록
- 호스팅 영역 생성 (SLD 네임 서버 역할)
- 레코드 작성 (DNS 응답 정의)

### 2.2 라우팅 정책

- 단순 라우팅: 정해진 IP로 응답
- 가중치 기반: 지정된 비율로 응답
- 지연 시간 기반: 가장 빠른 리전으로 응답
- 장애 조치 기반: 장애 감지 시 대체 경로로 응답

### 2.3 도메인 이름 생성 절차

1. Route 53 > 등록된 도메인 > 도메인 등록
2. 호스팅 영역 > 레코드 생성
   - 레코드 이름: test
   - 레코드 유형: A
   - 값: 8.8.8.8
   - 라우팅 정책: 단순
3. nslookup, ping으로 검증

## 3. CDN (Contents Delivery Network)

### 3.1 개요

- 오리진 서버의 콘텐츠를 엣지 캐시 서버에 분산 저장
- 사용자에게 인접한 캐시 서버가 응답하여 지연 시간 최소화

### 3.2 캐싱 방식

- 캐시 미스: 캐시 없음 → 오리진에서 가져옴 → 캐싱
- 캐시 히트: 캐시 존재 → 바로 응답
- 정적 캐싱: 이미지, CSS, JS (TTL 설정 가능)
- 동적 캐싱: 사용자 요청에 따라 생성되는 콘텐츠 (TTL 0)

## 4. Amazon CloudFront

### 4.1 개요

- AWS의 CDN 서비스
- 엣지 로케이션에 콘텐츠 캐싱
- 전 세계 엣지 네트워크 기반

### 4.2 구성 요소

- 오리진: EC2, S3, ELB 등 원본
- Distribution: 콘텐츠 배포 단위
- 리전 엣지 캐시: 중간 캐시
- 엣지 로케이션: 사용자에게 콘텐츠 전달

### 4.3 주요 기능

- 정적/동적 콘텐츠 처리
- HTTPS 중계
- 다중 오리진 선택
- 접근 제어(서명 URL, 쿠키)

### 4.4 실습 개요

1. CloudFormation으로 EC2 배포
2. Route 53에 A 레코드로 EC2 IP 등록
3. 지연 시간 측정 (Chrome 개발자 도구)
4. AWS Certificate Manager에서 SSL 인증서 등록
5. CloudFront에서 배포 생성
   - 오리진에 EC2 퍼블릭 DNS 지정
   - 배포 생성 완료 후 도메인으로 접근하여 응답 확인
