## EC2 오토 스케일링

- EC2 인스턴스(가상 서버)의 수를 자동으로 조절해서 애플리케이션의 트래픽 변화에 유연하게 대응하도록 돕는 서비스

### 그룹의 최소, 최대 인스턴스 숫자 설정 가능

- 최소 (Minimum) 인스턴스 수:

  - 아무리 트래픽이 없어도 항상 유지하고 싶은 최소한의 인스턴스 수

  - 예를 들어, 2대로 설정하면 적어도 2대의 서버는 항상 켜져 있어서 기본적인 서비스를 제공할 수 있도록 한다

  - 이는 기본적인 서비스 안정성을 보장.

- 최대 (Maximum) 인스턴스 수:

  - 트래픽이 폭증하더라도 최대로 늘릴 수 있는 인스턴스 수.

    - 예를 들어, 10대로 설정하면 비용 통제나 백엔드 시스템의 부하 한계를 고려해 10대 이상으로는 늘리지 않는다.

    - 이는 비용 관리 및 과부하 방지에 중요

- 원하는 용량 (Desired Capacity):

  - 현재 유지하고 싶은 인스턴스 수로 스케일링 정책에 따라 이 값이 자동으로 조절됩된다

### 다양한 스케일링 정책 적용

- CPU 부하에 따라 인스턴스 크기 조절 가능

- 대표적으로 동적 스케일링이 있다.

- 동적 스케일링 (Dynamic Scaling):

  - 가장 일반적으로 사용되고 추천되는 정책

  - 특정 지표(예: CPU 사용률)가 목표 값(예: 60%)을 유지하도록 인스턴스 수를 자동으로 조절

  - 예를 들어, "CPU 사용률이 60%를 넘어가면 인스턴스를 늘리고, 60% 아래로 떨어지면 줄여라"와 같이 설정할 수 있다.

### 가용영역 (Availability Zone)에 인스턴스 분배

- 오토 스케일링은 인스턴스를 특정 리전 내의 여러 가용영역에 골고루 분산하여 배포할 수 있도록 지원

### 모니터링

- CloudWatch:

  - AWS의 모니터링 서비스로, EC2 인스턴스의 CPU 사용률, 네트워크 I/O 등 다양한 지표(Metrics)를 수집하고 시각화한다.

  - CloudWatch 지표를 기반으로 알람(Alarms)을 설정하고, 이 알람이 스케일링 정책의 트리거가 된다.

  - 예를 들어, "CPU 사용률이 5분 동안 70%를 초과하면 알람을 발생시켜라"와 같이 설정할 수 있다.

- ELB (Elastic Load Balancing):

  - 오토 스케일링 그룹의 인스턴스들은 보통 ELB 뒤에 위치

  - ELB는 들어오는 트래픽을 오토 스케일링 그룹 내의 여러 인스턴스에 분산시켜 준다

  - 오토 스케일링은 ELB의 헬스 체크 결과를 사용하여 비정상 인스턴스를 그룹에서 자동으로 제거하고, 새로운 정상 인스턴스로 교체.
