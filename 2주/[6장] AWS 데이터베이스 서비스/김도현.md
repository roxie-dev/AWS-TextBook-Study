## AWS RDS (Relational Database Service)

- AWS에서 제공하는 완전 관리형(Fully Managed) 관계형 데이터베이스 서비스

- 사용자가 직접 데이터베이스 서버를 설치, 패치, 백업, 복구, 확장 등을 관리할 필요 없이, AWS가 이 모든 운영 작업을 자동화해서 데이터베이스 관리에 드는 시간과 노력을 절감할 수 있음

### RDS와 EC2

- 내부에서는 EC2를 활용함

  - RDS 인스턴스 하나하나는 내부적으로 EC2 인스턴스 위에서 동작함. 하지만 이 EC2 인스턴스는 AWS에 의해 완전히 관리되고, 사용자가 직접 EC2 인스턴스에 SSH 접속해서 운영체제를 제어하거나 패키지를 설치하는 등의 작업은 불가능함

- **VPC 안에서 동작**

  - 모든 RDS 인스턴스는 사용자가 지정한 Amazon Virtual Private Cloud (VPC) 내에 생성됨. 이건 네트워크 격리를 통해 보안을 강화하고, 사용자의 다른 AWS 리소스(EC2, Lambda 등)와 긴밀하게 통합될 수 있도록 한다.

  - 기본적으로 Public IP를 부여하지 않으면 외부에서 접근 불가능함

    - 보안을 위해 기본적으로는 Public IP를 할당하지 않으니까, VPC 내부의 EC2 인스턴스나 다른 AWS 서비스에서만 접근 가능함.

    - 외부에서 직접 접근해야 하는 경우(예: 개발자의 로컬 PC에서 접속), Public IP를 할당하거나, VPN, Direct Connect, 또는 Bastion Host(점프 서버)를 통해 접근해야 함.

- 서브넷과 보안그룹 지정 필요함

  - RDS 인스턴스는 특정 VPC 내의 서브넷에 배포됨. 특히, Multi-AZ 배포를 위해서는 최소 두 개 이상의 서로 다른 가용 영역(AZ)에 걸쳐 있는 서브넷을 지정해야 함.

  - 보안 그룹은 데이터베이스 인스턴스에 대한 네트워크 트래픽을 제어하는 방화벽 역할을 함. 특정 IP 주소, IP 범위, 또는 다른 보안 그룹의 인스턴스에서만 데이터베이스 포트(예: MySQL의 3306)로의 접근을 허용하도록 설정해서 보안을 강화.

- 중지 가능함

  - 개발 및 테스트 환경에서 비용 절감을 위해 RDS 인스턴스를 중지할 수 있음. 인스턴스가 중지된 동안에는 컴퓨팅 비용이 발생하지 않고 스토리지 비용만 청구됨.

### 인증방법

- 전통적인 유저, 패스워드 방식임

  - 데이터베이스에 접근하기 위한 가장 일반적인 방법으로, 데이터베이스 관리자(DBA)가 생성한 사용자 계정(User)과 비밀번호(Password)를 사용.

- AWS 시크릿 매니저와 연동해서 자동 로테이션 가능

  - AWS Secrets Manager와 연동해서 데이터베이스 자격 증명(사용자 이름 및 비밀번호)을 안전하게 저장하고, 주기적으로 자동으로 로테이션(갱신)할 수 있음. 이건 보안 모범 사례고, 자격 증명 노출 위험을 크게 줄여줌. 애플리케이션은 직접 자격 증명을 관리하는 대신 Secrets Manager를 통해 자격 증명을 가져옴.

- IAM DB 인증 가능

  - IAM(Identity and Access Management) 사용자와 역할 자격 증명을 사용해서 데이터베이스에 액세스할 수 있음.

  - 임시 보안 자격 증명을 사용하고, 비밀번호를 관리할 필요가 없어서 보안성이 매우 높음.

  - 특정 IAM 사용자나 역할만 특정 DB 인스턴스에 접근할 수 있도록 세밀하게 권한을 제어할 수 있음.

### RDS Multi-AZ

- 두 개 이상의 AZ에 걸쳐 데이터베이스를 구축하고 원본과 다른 DB(Standby)를 자동으로 동기화함 (sync)

  - 동기식(Synchronous) 복제를 사용함. 원본 DB(Primary)에 데이터가 기록되면 Standby DB에도 동시에 기록되어야만 트랜잭션이 완료되는 방식으로, 데이터 일관성과 무결성을 보장함.

- 원본 DB의 장애 발생 시 자동으로 다른 DB가 원본으로 승격됨 (DNS가 Standby DB로)

  - Primary DB에 장애(인스턴스 장애, AZ 장애 등)가 발생하면, AWS RDS는 자동으로 장애 감지 및 페일오버(Failover)를 수행해서 Standby DB를 새로운 Primary DB로 승격시킴.

  - 이 과정은 수 분 내에 완료되고, RDS 엔드포인트(DNS 이름)는 변경되지 않고 새로운 Primary DB를 가리키게 돼서 애플리케이션은 자동으로 연결을 재개할 수 있음.

- Standby DB는 접근 불가능함

  - Standby DB는 오직 Primary DB의 동기식 복제를 위해 대기하는 역할만 하고, 직접 읽기/쓰기 요청을 처리할 수 없음. 이건 Multi-AZ가 읽기 성능 향상이 아닌 **장애 복구 및 고가용성**에 중점을 둔 서비스이기 때문임.

- 퍼포먼스 상승 효과가 아닌 안전성을 위한 서비스임

  - 동기식 복제 특성상 Primary DB의 쓰기 성능에 약간의 오버헤드를 줄 수 있지만, 이건 극히 미미하고 주된 목적은 데이터 손실 없는 고가용성 및 재해 복구(DR)임.

### 파라미터 그룹

- 데이터베이스의 주요 파라미터 (타임존, 패스워드 유효시간) 등을 묶은 논리적 단위

- 데이터베이스 엔진의 다양한 구성 파라미터를 제어할 수 있는 템플릿임.

- 미리 지정해둔 파라미터 설정 모음으로 여러 RDS에 적용 가능함
